<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-9906435408281205">
    <title>을지로 점심메뉴 추천 - 오늘 뭐 먹지? 고민 해결!</title>
    <style>
        /* Base styles for larger screens (desktop first approach) */
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            position: relative; /* Added for positioning child absolute elements */
            padding-top: 80px;
        }
        header h1 {
            color: #2c3e50;
            font-size: 2.8em;
            margin-bottom: 10px;
            margin-top: 30px;
        }
        header p {
            font-size: 1.2em;
            color: #555;
        }
        .intro-button {
    position: absolute;
    top: 5px;
    right: 20px; /* index.html은 원래 우측이었으므로 위치 유지 */
    background-color: #007bff; /* 기존 블루 유지 */
    color: white;
    padding: 8px 0;   /* 상하 패딩만 유지 */
    width: 85px;      /* 고정 너비 설정 (4글자 기준 넉넉하게) */
    text-align: center;
    border-radius: 5px;
    text-decoration: none;
    font-size: 0.9em;
    transition: background-color 0.3s ease;
}

.intro-button:hover {
    background-color: #0056b3;
}
        .introduction, .how-to-use, .euljiro-special, .about-service, .disclaimer {
            margin-bottom: 25px;
            padding: 0 10px;
            text-align: justify;
        }
        .introduction h2, .how-to-use h2, .euljiro-special h2, .about-service h2, .disclaimer h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 15px;
            text-align: center;
        }
        .introduction p, .how-to-use p, .euljiro-special p, .about-service p, .disclaimer p {
            font-size: 1em;
            color: #666;
        }
        .random-picker {
            text-align: center;
            margin-bottom: 30px;
        }
        .pick-button {
            background-color: #4CAF50; /* Green */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 80%; /* Make button more responsive */
            max-width: 300px; /* Limit button width on large screens */
        }
        .pick-button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }
        .pick-button:active {
            background-color: #3e8e41;
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .recommendation-display {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        .recommendation-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            text-align: left;
            width: 100%;
            box-sizing: border-box;
            cursor: pointer; /* Indicate it's clickable */
        }
        .recommendation-card:hover {
            background-color: #f0f0f0; /* Slight hover effect */
        }
        .recommendation-card h3 {
            color: #333;
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.6em;
        }
        .recommendation-card p {
            color: #555;
            margin-bottom: 5px;
            font-size: 1em;
        }
        .recommendation-card p strong {
            color: #000;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #eee;
            color: #777;
            font-size: 0.9em;
        }

        /* Media Queries for Mobile Optimization */
        @media (max-width: 768px) {
            .container {
                margin: 10px; /* Smaller margin on smaller screens */
                padding: 15px;
            }
            header h1 {
                font-size: 2em; /* Smaller header on mobile */
                margin-top: 15px; /* Push H1 down from the top of the header */
            }
            header p {
                font-size: 1em;
            }
            .pick-button {
                font-size: 1em;
                padding: 12px 20px;
                width: 90%; /* Wider button on mobile */
            }
            .recommendation-card {
                padding: 15px;
            }
            .recommendation-card h3 {
                font-size: 1.4em;
            }
            .recommendation-card p {
                font-size: 0.9em;
            }
            footer {
                padding: 15px;
                font-size: 0.8em;
            }
            .introduction p, .how-to-use p, .euljiro-special p, .about-service p, .disclaimer p {
                font-size: 0.9em;
            }
            .introduction h2, .how-to-use h2, .euljiro-special h2, .about-service h2, .disclaimer h2 {
                font-size: 1.5em;
            }
            /* New styles for button and title spacing */
            .intro-button {
                width: 75px;   /* 모바일 고정 너비 */
                padding: 6px 0;
                font-size: 0.8em;
                top: 5px;
                right: 10px;
            }
            header {
                padding-top: 40px; /* Add more top padding to header */
            }
        }

        @media (max-width: 480px) {
            .container {
                margin: 5px;
                padding: 10px;
            }
            header h1 {
                font-size: 1.8em;
            }
            header p {
                font-size: 0.9em;
            }
            .pick-button {
                font-size: 0.9em;
                padding: 10px 15px;
            }
            .recommendation-card {
                padding: 10px;
            }
            .recommendation-card h3 {
                font-size: 1.2em;
            }
            .recommendation-card p {
                font-size: 0.85em;
            }
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9906435408281205"
     crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <header>
            <a href="introduction.html" class="intro-button">소   개</a>
            <h1>을지로 점심메뉴 추천</h1>
            <p>오늘 점심 뭐 먹지? 고민될 땐 여기서 골려보세요!</p>
        </header>

        <div class="random-picker">
            <button class="pick-button" id="pickRandomButton">오늘 뭐 먹지? (추천받기)</button>
        </div>

        <div class="recommendation-display" id="recommendationDisplay">
            <!-- Selected recommendation will be rendered here by JavaScript -->
        </div>

        <section class="how-to-use">
            <h2>어떻게 사용하나요? - 점심 고민, 이제 그만!</h2>
            <p>
                사용법은 아주 간단합니다. 페이지 상단에 있는 <strong>"오늘 뭐 먹지? (추천받기)"</strong> 버튼을 클릭하기만 하면 됩니다.
                버튼을 누를 때마다 저희가 엄선한 을지로 맛집 리스트 중에서 무작위로 하나의 식당을 추천해 드립니다.
                각 식당 카드에는 대략적인 금액대와 상세 위치 정보가 포함되어 있어, 예산과 동선을 고려한 선택에 도움을 드립니다.
                추천받은 식당 카드를 클릭하면 네이버 지도 앱을 먼저 연결하고, 실패 시 웹 지도로 연결됩니다.
                마음에 드는 식당이 나올 때까지 몇 번이고 눌러보세요! 더 이상 점심 메뉴 고민으로 시간을 낭비할 필요가 없습니다.
                저희 웹사이트와 함께 매일매일 특별한 점심을 경험해보세요.
            </p>
        </section>


        <footer>
            <p>&copy; 2026 을지로 점심 추천 | 모든 정보는 변경될 수 있으므로, 방문 전 확인 부탁드립니다.</p>
        </footer>
    </div>

    <script>
        let lunchRecommendations = []; // Declare as `let` since it will be reassigned

        async function fetchRecommendations() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                lunchRecommendations = await response.json();
                renderRecommendation(); // Initial render after data is loaded
            } catch (error) {
                console.error('Error fetching lunch recommendations:', error);
                const displayElement = document.getElementById('recommendationDisplay');
                displayElement.innerHTML = '<p style="text-align:center; color:#e74c3c;">추천 메뉴를 불러오는 데 실패했습니다. 잠시 후 다시 시도해주세요.</p>';
            }
        }

        let currentRecommendation = null;

        function renderRecommendation() {
            const displayElement = document.getElementById('recommendationDisplay');
            displayElement.innerHTML = ''; // Clear previous

            if (currentRecommendation) {
                const card = document.createElement('div');
                card.classList.add('recommendation-card');
                // Add data attributes for map search
                card.dataset.name = currentRecommendation.name;
                card.dataset.cuisine = currentRecommendation.cuisine;
                card.dataset.location = currentRecommendation.location;
                
                card.innerHTML = `
                    <h3>${currentRecommendation.name}</h3>
                    <p><strong>종류:</strong> ${currentRecommendation.cuisine}</p>
                    <p><strong>금액대:</strong> ${currentRecommendation.priceRange}</p>
                    <p><strong>설명:</strong> ${currentRecommendation.description}</p>
                    <p><strong>위치:</strong> ${currentRecommendation.location}</p>
                `;
                card.addEventListener('click', () => {
                    const restaurantName = card.dataset.name;
                    const restaurantLocation = card.dataset.location;
                    const searchQuery = `${restaurantName} ${restaurantLocation}`;

                    // --- Attempt to open Naver Map App first ---
                    const appUrl = `navermap://search?query=${encodeURIComponent(searchQuery)}&appname=EuljiroLunchRecommender`;
                    const webUrl = `https://m.map.naver.com/search/result.naver?query=${encodeURIComponent(searchQuery)}`;
                    
                    // Attempt to open the app deep link
                    const newWindow = window.open(appUrl, '_blank'); 
                    
                    // Fallback to web URL after a delay if app didn't open
                    setTimeout(() => {
                        // Check if the new window is still about:blank or was closed by app
                        if (newWindow && newWindow.location.href === 'about:blank') {
                            // If the new window is still about:blank, it means the app didn't launch
                            newWindow.location.href = webUrl; // Navigate the *new* tab/window to web URL
                        } else if (!document.hidden) { // If app didn't take focus and newWindow might be null/closed
                            window.location.href = webUrl; // Navigate *current* page to web URL as a last resort
                        }
                    }, 500); // 500ms delay for app to launch
                });
                displayElement.appendChild(card);
            } else {
                // Initial message before first pick
                displayElement.innerHTML = '<p style="text-align:center; color:#777;">버튼을 눌러 점심 메뉴를 추천받으세요!</p>';
            }
        }

        function pickRandomRecommendation() {
            if (lunchRecommendations.length === 0) {
                console.warn('Lunch recommendations not loaded yet or empty.');
                return;
            }
            const randomIndex = Math.floor(Math.random() * lunchRecommendations.length);
            currentRecommendation = lunchRecommendations[randomIndex];
            renderRecommendation();
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchRecommendations(); // Fetch data when DOM is loaded
            document.getElementById('pickRandomButton').addEventListener('click', pickRandomRecommendation);
        });
    </script>
